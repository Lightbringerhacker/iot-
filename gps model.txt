from goto import *
import time
import var
import pio
import resource
import cpu
import FileStore
import VFP
import Generic

def peripheral_setup():
    pio.cpu = cpu.CPU()
    pio.storage = FileStore.FileStore()
    pio.server = VFP.VfpServer()
    pio.GPS1 = Generic.GPS()
    pio.storage.begin()
    pio.server.begin()
    # Install interrupt handlers

def peripheral_loop():
    pio.server.poll()

def main():
    peripheral_setup()
    while 1:
        peripheral_loop()
    pass

if _name_ == '_main_':
    main()